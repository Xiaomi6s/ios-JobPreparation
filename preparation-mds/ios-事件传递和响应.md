# ios 事件的产生和传递
 ## 1.事件的产生
  >+ 发生触摸事件后，系统会将该事件加入到一个由UIApplication管理的事件队列中，为什么是队列而不是栈那？因为队列的特点是FIFO，即先进先出，先产生的事件先处理。
  >+ UIApplication会从事件队列中取出最前面的事件，并将事件分发下去以便处理，通常，先发送事件给应用程序的主窗口（keywindow）。
  >+ 主窗口会在视图层次结构中找到一个最合适的视图来处理触摸事件，找到合适的视图控件后，就会调用视图控件的touches方法来作具体事件处理。
 ## 2.事件的传递
  >+ 触摸事件的传递是从父控件传递到子控件的
  >+ 也就是UIApplication->window->寻找处理事件最合适的view
  **注意**：如果父控件不能接受触摸事件，那么子控件就不可能接受到触摸事件。
 ## 应用如何找到最合适的控件来处理事件？
  1. 首先判断主窗口（keywindow）自己是否能接受触摸事件
  2. 判断触摸点是否在自己身上
  3. 子控件数组中从后往前遍历子控件，重复前面两个步骤（所谓从后往前遍历子控件，就是首先查找子控件数组中最后一个元素，然后执行1、2步骤）
  4. view，比如叫做aView，那么会把这个事件交个这个aView，再遍历这个aView的子控件，直到没有更合适的view为止。
  5. 如果没有符合的子控件，那么久认为自己最合适处理这个事件，也就是自己就是最合适的view。
  ## 总结
   1. 点击一个view或产生一个触摸事件a,这个触摸事件a会被添加到由UIApplication管理的队列中
   2. UIApplication会从队列中取出最前面的事件，把该事件传递给应用程序的主窗口（keywindow）
   3. 主窗口会在视图层次结构中找到一个最合适的视图来处理触摸事件。
## 3.如何寻找最合适的view
 1. 首先判断主窗口（keyWindow）自己是否能接受触摸事件
 2. 触摸点是否在自己身上
 3. 从后往前遍历子控件，重复前面的两个步骤（首先查找数组中最后一个元素）
 4. 如果没有符合条件的子控件，那么就认为自己是最合适处理